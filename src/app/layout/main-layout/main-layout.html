<mat-sidenav-container class="h-screen w-full bg-gray-50">

  <mat-sidenav #sidenav mode="side" opened class="w-72 border-r border-gray-200 bg-white shadow-sm">
    
    <div class="h-16 flex items-center gap-3 px-6 border-b border-gray-100">
      <div class="w-8 h-8 rounded bg-blue-700 flex items-center justify-center text-white shadow-sm">
        <mat-icon class="text-lg">school</mat-icon>
      </div>
      <span class="text-xl font-bold tracking-tight text-gray-800">UFR SET</span>
    </div>

    <mat-nav-list class="px-3 pt-6 space-y-1">
      
      @if (isAdmin()) {
        <div class="px-4 py-2 mt-2 text-xs font-bold text-gray-400 uppercase tracking-wider">
          Administration
        </div>
        
        <a mat-list-item 
           routerLink="/admin/filieres" 
           routerLinkActive="bg-blue-50 text-blue-700 font-medium"
           class="rounded-lg mb-1 hover:bg-gray-50 transition-colors">
          <mat-icon matListItemIcon class="text-gray-500" [class.text-blue-700]="rla1.isActive">dashboard</mat-icon>
          <span matListItemTitle>Maquette & Data</span>
        </a>
        <div class="hidden" routerLink="/admin/filieres" routerLinkActive #rla1="routerLinkActive"></div>

        <a mat-list-item 
           routerLink="/admin/grades" 
           routerLinkActive="bg-blue-50 text-blue-700 font-medium"
           class="rounded-lg mb-1 hover:bg-gray-50 transition-colors">
          <mat-icon matListItemIcon class="text-gray-500" [class.text-blue-700]="rla2.isActive">edit_note</mat-icon>
          <span matListItemTitle>Saisie des Notes</span>
        </a>
        <div class="hidden" routerLink="/admin/grades" routerLinkActive #rla2="routerLinkActive"></div>
      }

      @if (isStudent()) {
        <div class="px-4 py-2 mt-2 text-xs font-bold text-gray-400 uppercase tracking-wider">
          Espace Étudiant
        </div>

        <a mat-list-item 
           routerLink="/student/simulation" 
           routerLinkActive="bg-blue-50 text-blue-700 font-medium"
           class="rounded-lg mb-1 hover:bg-gray-50 transition-colors">
          <mat-icon matListItemIcon class="text-gray-500" [class.text-blue-700]="rla3.isActive">psychology</mat-icon>
          <span matListItemTitle>Mon Orientation (IA)</span>
        </a>
        <div class="hidden" routerLink="/student/simulation" routerLinkActive #rla3="routerLinkActive"></div>

        <a mat-list-item 
           routerLink="/student/notes" 
           routerLinkActive="bg-blue-50 text-blue-700 font-medium"
           class="rounded-lg mb-1 hover:bg-gray-50 transition-colors">
          <mat-icon matListItemIcon class="text-gray-500" [class.text-blue-700]="rla4.isActive">history_edu</mat-icon>
          <span matListItemTitle>Relevé de Notes</span>
        </a>
        <div class="hidden" routerLink="/student/notes" routerLinkActive #rla4="routerLinkActive"></div>
      }

    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content class="flex flex-col min-h-screen">
    
    <mat-toolbar class="bg-white! border-b border-gray-200 px-6 flex justify-between h-16 sticky top-0 z-20 shadow-sm">
      
      <div class="flex items-center gap-2 text-gray-500 text-sm">
        <mat-icon class="text-gray-400 text-base h-4 w-4">home</mat-icon>
        <span>/</span>
        <span class="font-medium text-gray-700">Tableau de bord</span>
      </div>

      <div class="flex items-center gap-3">
        <div class="flex flex-col items-end mr-1 leading-tight">
          <span class="text-sm font-semibold text-gray-700">{{ currentUser()?.email }}</span>
          <span class="text-[10px] uppercase font-bold text-white bg-gray-400 px-1.5 py-0.5 rounded">
            {{ currentUser()?.role }}
          </span>
        </div>
        
        <button mat-icon-button [matMenuTriggerFor]="userMenu" class="border border-gray-200">
          <mat-icon class="text-gray-600">person</mat-icon>
        </button>
        
        <mat-menu #userMenu="matMenu" xPosition="before">
          <div class="px-4 py-3 border-b border-gray-100 mb-1">
            <p class="text-sm font-bold text-gray-800">Compte Utilisateur</p>
            <p class="text-xs text-gray-500 truncate max-w-[150px]">{{ currentUser()?.email }}</p>
          </div>
          <button mat-menu-item (click)="logout()">
            <mat-icon class="text-red-500">logout</mat-icon>
            <span class="text-red-600">Déconnexion</span>
          </button>
        </mat-menu>
      </div>
    </mat-toolbar>

    <main class="flex-1 p-6 md:p-8 overflow-y-auto scroll-smooth">
      <router-outlet></router-outlet>
    </main>

  </mat-sidenav-content>
</mat-sidenav-container>